


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="es-UN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="es-UN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pases al Transpilador y administrador de pases &mdash; documentación de Qiskit - 0.30.1</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme-override.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-variables.ade9f9d55df9d2893fc676ecd59723a1.css" type="text/css" />
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Buscar" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://qiskit.org/" aria-label="PyTorch"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="../../getting_started.html">Getting started</a>
          </li>

          <li>
            <a href="../../tutorials.html">Tutorials</a>
          </li>

          <li>
            <a href="https://qiskit.org/documentation/partners/" target="_blank">Partners</a>
          </li>

          <li>
            <div id="resourcesDropdownButton" data-toggle="resources-dropdown" class="resources-dropdown">
              <a class="resource-option with-down-orange-arrow">
                Applications
              </a>
              <div class="resources-dropdown-menu">
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/machine-learning/">
                  <span class="dropdown-title">Machine learning</span>
                  <p>QSVM, VQC (Variational Quantum Classifier), and QGAN (Quantum Generative
                    Adversarial Network) algorithms.</p>
                </a>
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/nature/">
                  <span class="dropdown-title">Nature</span>
                  <p>Quantum applications in chemistry, physics, and biology.</p>
                </a>
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/finance/">
                  <span class="dropdown-title">Finance</span>
                  <p>Uncertainty components for stock/securities problems, Ising translators for
                    portfolio optimizations and data providers to source real or random data.</p>
                </a>
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/optimization/">
                  <span class="dropdown-title">Optimization</span>
                  <p>High-level optimization problems that are ready to
                    run on simulators and real quantum devices</p>
                </a>
              </div>
          </li>
          <li>
              <a href=="https://qiskit.org/documentation/experiments/" target="_blank">Experiments</a>
          </li>
          <li>
            <div id="resourcesDropdownButton" data-toggle="resources-dropdown" class="resources-dropdown">
              <a class="resource-option with-down-orange-arrow">
                Resources
              </a>
              <div class="resources-dropdown-menu">
                <a class="doc-dropdown-option nav-dropdown-item" href="https://qiskit.slack.com">
                  <span class="dropdown-title">Slack support</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://qiskit.org/textbook">
                  <span class="dropdown-title">Qiskit Textbook</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://qiskit.org/events">
                  <span class="dropdown-title">Qiskit events</span>
                  <p></p>
                </a>
            </div>
          </li>
          <li>
            <a href="https://github.com/Qiskit/" target="_blank">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>


<body class="pytorch-body">

   

    

    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="rst-current-version-label">es_UN</span>
    <span class="rst-versions-dropdown-icon"></span>
  </span>
  <div class="rst-other-versions">
    
    <dl>
      <dt>Idiomas</dt>
      
        <dd><a class="version" href="/documentation/tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.html">English</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ja_JP/tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.html">Japanese</a></dd>
      
        <dd><a class="version" href="/documentation/locale/de_DE/tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.html">German</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ko_KR/tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.html">Korean</a></dd>
      
        <dd><a class="version" href="/documentation/locale/pt_BR/tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.html">Portuguese, Brazilian</a></dd>
      
        <dd><a class="version" href="/documentation/locale/fr_FR/tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.html">French</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ta_IN/tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.html">Tamil</a></dd>
      
    </dl>
    
    <dl>
      <dt>Previous Releases</dt>
      
        <dd><a class="version" href="/documentation/stable/0.19/index.html">0.19</a></dd>
      
        <dd><a class="version" href="/documentation/stable/0.24/index.html">0.24</a></dd>
      
        <dd><a class="version" href="/documentation/stable/0.25/index.html">0.25</a></dd>
      
        <dd><a class="version" href="/documentation/stable/0.26/index.html">0.26</a></dd>
      
        <dd><a class="version" href="/documentation/stable/0.27/index.html">0.27</a></dd>
      
        <dd><a class="version" href="/documentation/stable/0.28/index.html">0.28</a></dd>
      
        <dd><a class="version" href="/documentation/stable/0.29/index.html">0.29</a></dd>
      
    </dl>
  </div>
  <script>
    jQuery('.version').click((evt) => {
      const hash = window.location.hash
      const complete_url = evt.target.href + hash
      window.location = complete_url
      evt.preventDefault()
    })
  </script>
</div>

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Página de inicio de la Documentación</a></li>
</ul>
<p><span class="caption-text">Preliminares</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../qc_intro.html">Computación cuántica en pocas palabras</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro_tutorial1.html">Introducción a Qiskit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing_to_qiskit.html">Contribuir a Qiskit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuración Local</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Preguntas Frecuentes</a></li>
</ul>
<p><span class="caption-text">Bibliotecas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/circuit_library.html">Biblioteca de circuitos</a></li>
</ul>
<p><span class="caption-text">Referencias de la API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/terra.html">Qiskit Terra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/aer.html">Qiskit Aer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/ignis.html">Qiskit Ignis (obsoleto)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/aqua.html">Qiskit Aqua (obsoleto)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/ibmq-provider.html">Proveedor Qiskit IBM Quantum</a></li>
</ul>
<p><span class="caption-text">Guía de Migración de Qiskit Aqua</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../aqua_migration.html">Guía de Migración de Qiskit Aqua</a></li>
</ul>
<p><span class="caption-text">Solución de Problemas</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://quantum-computing.ibm.com/lab/docs/iql/manage/errors">Códigos de error de la API de IBM Quantum</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
      <li>Pases al Transpilador y administrador de pases</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.ipynb" rel="nofollow"><img src="../../_static/images/view-page-source-icon.svg"></a>
          
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">
          
          <div class="rst-content style-external-links">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Esta página ha sido generada a partir de <a class="reference external" href="https://github.com/Qiskit/qiskit-tutorials/blob/master/tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.ipynb">tutorials/circuits_advanced/04_transpiler_passes_and_passmanager.ipynb</a>.</p>
</div>
<section id="Pases-al-Transpilador-y-administrador-de-pases">
<h1>Pases al Transpilador y administrador de pases<a class="headerlink" href="#Pases-al-Transpilador-y-administrador-de-pases" title="Enlazar permanentemente con este título">¶</a></h1>
<section id="Introducción">
<h2>Introducción<a class="headerlink" href="#Introducción" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un componente central de Qiskit Terra es el transpilador, el cual esta diseñado para modularidad y extensibilidad. El objetivo es lograr escribir fácilmente transformaciones de circuitos (conocidos como <strong>pases</strong> al transpilador), y combinarlos con otros pases existentes. Cuales pases son conectados y en que orden tiene un efecto substancial en el resultado final. Este camino es determinado por un <strong>administrador de pases</strong>, el cual ordena los pases y también permite que los pases se comuniquen entre si, proporcionándoles un espacio compartido. De esta manera, el transpilador abre la puerta a investigación a circuitos cuánticos de optimización agresivos.</p>
<p>En este cuaderno revisaremos los pases integrados en Qiskit, como usar el administrador de pases y el desarrollo de un pase al transpilador simple. Para poder hacer esto ultimo, primero tenemos que introducir la representación interna de los circuitos cuánticos en Qiskit, en la forma de Grafos Acíclicos Dirigidos o <strong>DAG</strong>. Después, ilustraremos un simple pase de intercambio de mapeo, el cuál transforma un circuito de entrada a uno compatible con un dispositivo cuántico con conectividad limitada.</p>
<p><strong>Antes de comenzar</strong>: Es posible que necesites instalar las librerias <code class="docutils literal notranslate"><span class="pre">pydot</span></code> y <code class="docutils literal notranslate"><span class="pre">graphviz</span></code> para las rutinas de graficado de DAG. Si usas Anaconda Python, puedes instalar ambos con el comando <code class="docutils literal notranslate"><span class="pre">conda</span></code>. Si usas el interprete de Python nativo a tu sistema, puedes instalar <code class="docutils literal notranslate"><span class="pre">pydot</span></code> con el comando <code class="docutils literal notranslate"><span class="pre">pip</span></code>, y <code class="docutils literal notranslate"><span class="pre">graphviz</span></code> con el administrador de paquetes nativo a tu sistema (por ejemplo, <code class="docutils literal notranslate"><span class="pre">yum</span></code>, <code class="docutils literal notranslate"><span class="pre">apt</span></code>, <code class="docutils literal notranslate"><span class="pre">dnf</span></code>, <code class="docutils literal notranslate"><span class="pre">brew</span></code>, etc.).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>
<span class="kn">from</span> <span class="nn">qiskit.compiler</span> <span class="kn">import</span> <span class="n">transpile</span>
<span class="kn">from</span> <span class="nn">qiskit.transpiler</span> <span class="kn">import</span> <span class="n">PassManager</span>
</pre></div>
</div>
</div>
</section>
<section id="Objeto-PassManager">
<h2>Objeto PassManager<a class="headerlink" href="#Objeto-PassManager" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Te permite especificar el conjunto de pases que quieres.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">circ</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">ccx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_5_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_5_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.transpiler.passes</span> <span class="kn">import</span> <span class="n">Unroller</span>
<span class="n">pass_</span> <span class="o">=</span> <span class="n">Unroller</span><span class="p">([</span><span class="s1">&#39;u1&#39;</span><span class="p">,</span> <span class="s1">&#39;u2&#39;</span><span class="p">,</span> <span class="s1">&#39;u3&#39;</span><span class="p">,</span> <span class="s1">&#39;cx&#39;</span><span class="p">])</span>
<span class="n">pm</span> <span class="o">=</span> <span class="n">PassManager</span><span class="p">(</span><span class="n">pass_</span><span class="p">)</span>
<span class="n">new_circ</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
<span class="n">new_circ</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_6_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_6_0.png" />
</div>
</div>
<p>Todos los pases al transpilador de Qiskit son accesibles con <code class="docutils literal notranslate"><span class="pre">qiskit.transpiler.passes</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.transpiler</span> <span class="kn">import</span> <span class="n">passes</span>
<span class="p">[</span><span class="n">pass_</span> <span class="k">for</span> <span class="n">pass_</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">passes</span><span class="p">)</span> <span class="k">if</span> <span class="n">pass_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isupper</span><span class="p">()]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;ApplyLayout&#39;,
 &#39;BarrierBeforeFinalMeasurements&#39;,
 &#39;BasicSwap&#39;,
 &#39;BasisTranslator&#39;,
 &#39;CSPLayout&#39;,
 &#39;CXCancellation&#39;,
 &#39;CXDirection&#39;,
 &#39;CheckCXDirection&#39;,
 &#39;CheckMap&#39;,
 &#39;Collect2qBlocks&#39;,
 &#39;CommutationAnalysis&#39;,
 &#39;CommutativeCancellation&#39;,
 &#39;ConsolidateBlocks&#39;,
 &#39;CountOps&#39;,
 &#39;CountOpsLongestPath&#39;,
 &#39;CrosstalkAdaptiveSchedule&#39;,
 &#39;DAGFixedPoint&#39;,
 &#39;DAGLongestPath&#39;,
 &#39;Decompose&#39;,
 &#39;DenseLayout&#39;,
 &#39;Depth&#39;,
 &#39;EnlargeWithAncilla&#39;,
 &#39;FixedPoint&#39;,
 &#39;FullAncillaAllocation&#39;,
 &#39;HoareOptimizer&#39;,
 &#39;Layout2qDistance&#39;,
 &#39;LayoutTransformation&#39;,
 &#39;LookaheadSwap&#39;,
 &#39;MergeAdjacentBarriers&#39;,
 &#39;NoiseAdaptiveLayout&#39;,
 &#39;NumTensorFactors&#39;,
 &#39;Optimize1qGates&#39;,
 &#39;OptimizeSwapBeforeMeasure&#39;,
 &#39;RemoveDiagonalGatesBeforeMeasure&#39;,
 &#39;RemoveFinalMeasurements&#39;,
 &#39;RemoveResetInZeroState&#39;,
 &#39;ResourceEstimation&#39;,
 &#39;SabreLayout&#39;,
 &#39;SabreSwap&#39;,
 &#39;SetLayout&#39;,
 &#39;Size&#39;,
 &#39;StochasticSwap&#39;,
 &#39;TrivialLayout&#39;,
 &#39;UnitarySynthesis&#39;,
 &#39;Unroll3qOrMore&#39;,
 &#39;UnrollCustomDefinitions&#39;,
 &#39;Unroller&#39;,
 &#39;Width&#39;]
</pre></div></div>
</div>
</section>
<section id="Diferentes-variantes-del-mismo-pase">
<h2>Diferentes variantes del mismo pase<a class="headerlink" href="#Diferentes-variantes-del-mismo-pase" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Puede haber diferentes pases que hagan lo mismo pero de diferente manera. Por ejemplo, los pases <code class="docutils literal notranslate"><span class="pre">TrivialLayout</span></code>, <code class="docutils literal notranslate"><span class="pre">DenseLayout</span></code> y <code class="docutils literal notranslate"><span class="pre">NoiseAdaptiveLayout</span></code> escogen un acomodo (enlace entre qubits virtuales a qubits físicos), pero usan diferentes algoritmos y objetivos. Similarmente, los pases <code class="docutils literal notranslate"><span class="pre">BasicSwap</span></code>, <code class="docutils literal notranslate"><span class="pre">LookaheadSwap</span></code> y <code class="docutils literal notranslate"><span class="pre">StochasticSwap</span></code> insertan intercambios para hacer a los circuitos compatibles con un mapa de acoplamiento. La modularidad del transpilador permite hacer cambios a los pases y ejecutarlos fácilmente.</p>
<p>A continuación mostramos los todos pases de intercambio aplicados a un mismo circuito, para transformarlo para que coincida con una topología de cadena lineal. Las diferencias en rendimiento son evidentes, donde <code class="docutils literal notranslate"><span class="pre">StochasticSwap</span></code> es claramente el mejor. Sin embargo, esto puede variar dependiendo el circuito de entrada.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.transpiler</span> <span class="kn">import</span> <span class="n">CouplingMap</span><span class="p">,</span> <span class="n">Layout</span>
<span class="kn">from</span> <span class="nn">qiskit.transpiler.passes</span> <span class="kn">import</span> <span class="n">BasicSwap</span><span class="p">,</span> <span class="n">LookaheadSwap</span><span class="p">,</span> <span class="n">StochasticSwap</span>

<span class="n">coupling</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>

<span class="n">circuit</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">coupling_map</span> <span class="o">=</span> <span class="n">CouplingMap</span><span class="p">(</span><span class="n">couplinglist</span><span class="o">=</span><span class="n">coupling</span><span class="p">)</span>

<span class="n">bs</span> <span class="o">=</span> <span class="n">BasicSwap</span><span class="p">(</span><span class="n">coupling_map</span><span class="o">=</span><span class="n">coupling_map</span><span class="p">)</span>
<span class="n">pass_manager</span> <span class="o">=</span> <span class="n">PassManager</span><span class="p">(</span><span class="n">bs</span><span class="p">)</span>
<span class="n">basic_circ</span> <span class="o">=</span> <span class="n">pass_manager</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>

<span class="n">ls</span> <span class="o">=</span> <span class="n">LookaheadSwap</span><span class="p">(</span><span class="n">coupling_map</span><span class="o">=</span><span class="n">coupling_map</span><span class="p">)</span>
<span class="n">pass_manager</span> <span class="o">=</span> <span class="n">PassManager</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span>
<span class="n">lookahead_circ</span> <span class="o">=</span> <span class="n">pass_manager</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>

<span class="n">ss</span> <span class="o">=</span> <span class="n">StochasticSwap</span><span class="p">(</span><span class="n">coupling_map</span><span class="o">=</span><span class="n">coupling_map</span><span class="p">)</span>
<span class="n">pass_manager</span> <span class="o">=</span> <span class="n">PassManager</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span>
<span class="n">stochastic_circ</span> <span class="o">=</span> <span class="n">pass_manager</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">circuit</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_11_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_11_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">basic_circ</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_12_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_12_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">lookahead_circ</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_13_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_13_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">stochastic_circ</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_14_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_14_0.png" />
</div>
</div>
</section>
<section id="Administradores-de-pases-Preestablecidos">
<h2>Administradores de pases Preestablecidos<a class="headerlink" href="#Administradores-de-pases-Preestablecidos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Qiskit tiene varios administradores de pases predefinidos, que corresponden a varios niveles de optimización logrados a través de diferentes caminos de pases. Actualmente se soportan <code class="docutils literal notranslate"><span class="pre">optimization_level</span></code> de 0 a 3; entre más alto sea el número, más se optimizará, con un coste de mayor tiempo de cálculo. Escoger un administrador de pases puede tomar prueba y error, ya que depende mucho de que circuito se va a transpilar y que backend es el objetivo.</p>
<p>Aquí ilustramos los diferentes niveles viendo el circuito de síntesis del estado. Inicializamos 4 qubits en un estado arbitrario y intentamos optimizar el circuito que logre esto.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">optimization_level=0</span></code>: mapea el circuito al backend, sin optimización explicita (excepto por las optimizaciones que se hagan al mapear).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">optimization_level=1</span></code>: mapea el circuito pero también hace optimizaciones pequeñas colapsando compuertas adyacentes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">optimization_level=2</span></code>: hace optimizaciones medianas, incluyendo acomodos adaptivos al ruido y un procedimiento de cancelación de compuertas basado en las relaciones conmutativas de las compuertas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">optimization_level=3</span></code>: hace grandes optimizaciones, que además de los niveles anteriores, hace una resintetización de bloques de compuertas de dos qubits en el circuito.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">qiskit.test.mock</span> <span class="kn">import</span> <span class="n">FakeTokyo</span>

<span class="n">backend</span> <span class="o">=</span> <span class="n">FakeTokyo</span><span class="p">()</span>     <span class="c1"># mimics the tokyo device in terms of coupling map and basis gates</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="n">random_state</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">1</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="mi">1</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">1</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="mi">1</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">1</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="mi">1</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">*</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>

<span class="n">qc</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">random_state</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="n">qc</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<pre style="word-wrap: normal;white-space: pre;background: #fff0;line-height: 1.1;font-family: &quot;Courier New&quot;,Courier,monospace">     »
q_0: »
     »
q_1: »
     »
q_2: »
     »
q_3: »
     »
q_4: »
     »
q_5: »
     »
q_6: »
     »
q_7: »
     »
q_8: »
     »
q_9: »
     »
«     ┌────────────────────────────────────────────────────────────────────────────┐
«q_0: ┤0                                                                           ├
«     │                                                                            │
«q_1: ┤1                                                                           ├
«     │  initialize(0.5j,0.35355,0,0,0,0,0,0,0.35355,0.35355j,0,0,0,0,0.5,0.35355) │
«q_2: ┤2                                                                           ├
«     │                                                                            │
«q_3: ┤3                                                                           ├
«     └────────────────────────────────────────────────────────────────────────────┘
«q_4: ──────────────────────────────────────────────────────────────────────────────
«
«q_5: ──────────────────────────────────────────────────────────────────────────────
«
«q_6: ──────────────────────────────────────────────────────────────────────────────
«
«q_7: ──────────────────────────────────────────────────────────────────────────────
«
«q_8: ──────────────────────────────────────────────────────────────────────────────
«
«q_9: ──────────────────────────────────────────────────────────────────────────────
«                                                                                   </pre></div>
</div>
<p>Ahora mapeamos esto al dispositivo Tokyo de 20-qubits, con diferentes niveles de optimización:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">optimized_0</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">seed_transpiler</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">optimization_level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;gates = &#39;</span><span class="p">,</span> <span class="n">optimized_0</span><span class="o">.</span><span class="n">count_ops</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;depth = &#39;</span><span class="p">,</span> <span class="n">optimized_0</span><span class="o">.</span><span class="n">depth</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
gates =  OrderedDict([(&#39;cx&#39;, 55), (&#39;u3&#39;, 15), (&#39;u1&#39;, 15), (&#39;reset&#39;, 4)])
depth =  69
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">optimized_1</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">seed_transpiler</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">optimization_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;gates = &#39;</span><span class="p">,</span> <span class="n">optimized_1</span><span class="o">.</span><span class="n">count_ops</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;depth = &#39;</span><span class="p">,</span> <span class="n">optimized_1</span><span class="o">.</span><span class="n">depth</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
gates =  OrderedDict([(&#39;cx&#39;, 55), (&#39;u3&#39;, 15), (&#39;u1&#39;, 6)])
depth =  59
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">optimized_2</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">seed_transpiler</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">optimization_level</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;gates = &#39;</span><span class="p">,</span> <span class="n">optimized_2</span><span class="o">.</span><span class="n">count_ops</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;depth = &#39;</span><span class="p">,</span> <span class="n">optimized_2</span><span class="o">.</span><span class="n">depth</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
gates =  OrderedDict([(&#39;cx&#39;, 45), (&#39;u3&#39;, 15), (&#39;u1&#39;, 6)])
depth =  55
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">optimized_3</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">seed_transpiler</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">optimization_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;gates = &#39;</span><span class="p">,</span> <span class="n">optimized_3</span><span class="o">.</span><span class="n">count_ops</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;depth = &#39;</span><span class="p">,</span> <span class="n">optimized_3</span><span class="o">.</span><span class="n">depth</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
gates =  OrderedDict([(&#39;cx&#39;, 20), (&#39;u3&#39;, 15), (&#39;u1&#39;, 6)])
depth =  38
</pre></div></div>
</div>
</section>
<section id="Introducción-al-DAG">
<h2>Introducción al DAG<a class="headerlink" href="#Introducción-al-DAG" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En Qiskit representamos los circuitos internamente usando Grafos Acíclicos Dirigidos (DAG). La ventaja de esta representación sobre una lista de los estados puros (es decir un <em>netlist</em>) es que el flujo de información entre las operaciones es explicita, lo cual facilita los pases para hacer decisiones de transformaciones sin cambiar la semántica del circuito.</p>
<p>Empecemos por construir un circuito simple y examinar su DAG.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumRegister</span><span class="p">,</span> <span class="n">ClassicalRegister</span><span class="p">,</span> <span class="n">QuantumCircuit</span>
<span class="kn">from</span> <span class="nn">qiskit.dagcircuit</span> <span class="kn">import</span> <span class="n">DAGCircuit</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">QuantumRegister</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">ClassicalRegister</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="n">circ</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">circ</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">circ</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">circ</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">c_if</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_25_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_25_0.png" />
</div>
</div>
<p>En el DAG, hay tres tipos de nodos de grafos: nodos de entrada de qubit/clbit (verde), nodos de operación (azul) y nodos de salida (rojo). Cada borde indica el flujo de datos (o dependencia) entre dos nodos.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.converters</span> <span class="kn">import</span> <span class="n">circuit_to_dag</span>
<span class="kn">from</span> <span class="nn">qiskit.tools.visualization</span> <span class="kn">import</span> <span class="n">dag_drawer</span>
<span class="n">dag</span> <span class="o">=</span> <span class="n">circuit_to_dag</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
<span class="n">dag_drawer</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_27_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_27_0.png" />
</div>
</div>
<p>Por lo tanto, escribir un pase al transpilador significa utilizar la API DAGCircuit de Qiskit para analizar o transformar el circuito. Veamos algunos ejemplos de esto.</p>
<p><strong>a. Poner todos los nodos op en el DAG:</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dag</span><span class="o">.</span><span class="n">op_nodes</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&lt;qiskit.dagcircuit.dagnode.DAGNode at 0x7f1eebb870b0&gt;,
 &lt;qiskit.dagcircuit.dagnode.DAGNode at 0x7f1eebb87820&gt;,
 &lt;qiskit.dagcircuit.dagnode.DAGNode at 0x7f1eebb87eb0&gt;,
 &lt;qiskit.dagcircuit.dagnode.DAGNode at 0x7f1eebb876d0&gt;]
</pre></div></div>
</div>
<p>Cada nodo es una instancia de la clase <code class="docutils literal notranslate"><span class="pre">DAGNode</span></code>. Examinemos la información guardada en el segundo nodo op.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">node</span> <span class="o">=</span> <span class="n">dag</span><span class="o">.</span><span class="n">op_nodes</span><span class="p">()[</span><span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;node name: &quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;node op: &quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">op</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;node qargs: &quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">qargs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;node cargs: &quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">cargs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;node condition: &quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">condition</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
node name:  rz
node op:  &lt;qiskit.circuit.library.standard_gates.rz.RZGate object at 0x7f1eec144e20&gt;
node qargs:  [Qubit(QuantumRegister(3, &#39;q&#39;), 1)]
node cargs:  []
node condition:  (ClassicalRegister(3, &#39;c&#39;), 2)
</pre></div></div>
</div>
<p><strong>b. Añadir una operación a la parte trasera:</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.circuit.library</span> <span class="kn">import</span> <span class="n">HGate</span>
<span class="n">dag</span><span class="o">.</span><span class="n">apply_operation_back</span><span class="p">(</span><span class="n">HGate</span><span class="p">(),</span> <span class="n">qargs</span><span class="o">=</span><span class="p">[</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
<span class="n">dag_drawer</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_34_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_34_0.png" />
</div>
</div>
<p><strong>c. Añadir una operación a la parte delantera:</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.circuit.library</span> <span class="kn">import</span> <span class="n">CCXGate</span>
<span class="n">dag</span><span class="o">.</span><span class="n">apply_operation_front</span><span class="p">(</span><span class="n">CCXGate</span><span class="p">(),</span> <span class="n">qargs</span><span class="o">=</span><span class="p">[</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">cargs</span><span class="o">=</span><span class="p">[])</span>
<span class="n">dag_drawer</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_36_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_36_0.png" />
</div>
</div>
<p><strong>d. Substituir un nodo con un subcircuito:</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.circuit.library</span> <span class="kn">import</span> <span class="n">CHGate</span><span class="p">,</span> <span class="n">U2Gate</span><span class="p">,</span> <span class="n">CXGate</span>
<span class="n">mini_dag</span> <span class="o">=</span> <span class="n">DAGCircuit</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">QuantumRegister</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">)</span>
<span class="n">mini_dag</span><span class="o">.</span><span class="n">add_qreg</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="n">mini_dag</span><span class="o">.</span><span class="n">apply_operation_back</span><span class="p">(</span><span class="n">CHGate</span><span class="p">(),</span> <span class="n">qargs</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
<span class="n">mini_dag</span><span class="o">.</span><span class="n">apply_operation_back</span><span class="p">(</span><span class="n">U2Gate</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="n">qargs</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>

<span class="c1"># substitute the cx node with the above mini-dag</span>
<span class="n">cx_node</span> <span class="o">=</span> <span class="n">dag</span><span class="o">.</span><span class="n">op_nodes</span><span class="p">(</span><span class="n">op</span><span class="o">=</span><span class="n">CXGate</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="n">dag</span><span class="o">.</span><span class="n">substitute_node_with_dag</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">cx_node</span><span class="p">,</span> <span class="n">input_dag</span><span class="o">=</span><span class="n">mini_dag</span><span class="p">,</span> <span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<span class="n">dag_drawer</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_38_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_38_0.png" />
</div>
</div>
<p>Finalmente, después de que todas las transformaciones hayan sido completadas, podemos convertir de vuelta a un objeto QuantumCircuit. ¡Esto es lo que hace el transpilador! Toma un circuito, opera sobre el en su forma DAG, y regresa un circuito transformado.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.converters</span> <span class="kn">import</span> <span class="n">dag_to_circuit</span>
<span class="n">circuit</span> <span class="o">=</span> <span class="n">dag_to_circuit</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_40_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_40_0.png" />
</div>
</div>
</section>
<section id="Implementación-de-un-pase-de-BasicMapper">
<h2>Implementación de un pase de BasicMapper<a class="headerlink" href="#Implementación-de-un-pase-de-BasicMapper" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Ahora que estamos familiarizados con el DAG, usémoslo para escribir un pase al transpilador. Aquí vamos a implementar un pase básico para mapear un circuito arbitrario a un dispositivo con conectividad de qubits limitada. Llamamos a esto un BasicMapper. Este pase también esta incluido en Qiskit Terra.</p>
<p>La primera cosa que hay que hacer al escribir un pase al transpilador es decidir si la clase del pase deriva de <code class="docutils literal notranslate"><span class="pre">TransformationPass</span></code> o <code class="docutils literal notranslate"><span class="pre">AnalysisPass</span></code>. Los pases de transformación modifican el circuito, mientras que los pases de análisis solo recopilan información acerca de un circuito (para ser usada por otros pases). Luego, se implementa el método <code class="docutils literal notranslate"><span class="pre">run(dag)</span></code>, que ejecuta la tarea principal. Finalmente, el pase se registra en el módulo <code class="docutils literal notranslate"><span class="pre">qiskit.transpiler.passes</span></code>.</p>
<p>Este pase funciona de la siguiente manera: atraviesa el DAG capa por capa (cada capa es un grupo de operaciones que no actúa en qubits independientes, entonces, en teoría todas las operaciones en una capa pueden ser ejecutadas independientemente). Para cada operación, si no cumple ya las restricciones del mapa de acoplamiento, el pase identifica un camino e inserta swaps acorde al camino para poder acercar dos qubits.</p>
<p>Sigue los comentarios del código para más detalles.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span>

<span class="kn">from</span> <span class="nn">qiskit.transpiler.basepasses</span> <span class="kn">import</span> <span class="n">TransformationPass</span>
<span class="kn">from</span> <span class="nn">qiskit.transpiler</span> <span class="kn">import</span> <span class="n">Layout</span>
<span class="kn">from</span> <span class="nn">qiskit.circuit.library</span> <span class="kn">import</span> <span class="n">SwapGate</span>


<span class="k">class</span> <span class="nc">BasicSwap</span><span class="p">(</span><span class="n">TransformationPass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Maps (with minimum effort) a DAGCircuit onto a `coupling_map` adding swap gates.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">coupling_map</span><span class="p">,</span>
                 <span class="n">initial_layout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Maps a DAGCircuit onto a `coupling_map` using swap gates.</span>

<span class="sd">        Args:</span>
<span class="sd">            coupling_map (CouplingMap): Directed graph represented a coupling map.</span>
<span class="sd">            initial_layout (Layout): initial layout of qubits in mapping</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coupling_map</span> <span class="o">=</span> <span class="n">coupling_map</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initial_layout</span> <span class="o">=</span> <span class="n">initial_layout</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dag</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Runs the BasicSwap pass on `dag`.</span>

<span class="sd">        Args:</span>
<span class="sd">            dag (DAGCircuit): DAG to map.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DAGCircuit: A mapped DAG.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TranspilerError: if the coupling map or the layout are not</span>
<span class="sd">            compatible with the DAG.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_dag</span> <span class="o">=</span> <span class="n">DAGCircuit</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">qreg</span> <span class="ow">in</span> <span class="n">dag</span><span class="o">.</span><span class="n">qregs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">new_dag</span><span class="o">.</span><span class="n">add_qreg</span><span class="p">(</span><span class="n">qreg</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">creg</span> <span class="ow">in</span> <span class="n">dag</span><span class="o">.</span><span class="n">cregs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">new_dag</span><span class="o">.</span><span class="n">add_creg</span><span class="p">(</span><span class="n">creg</span><span class="p">)</span>


        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">property_set</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">initial_layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">property_set</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">initial_layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="o">.</span><span class="n">generate_trivial_layout</span><span class="p">(</span><span class="o">*</span><span class="n">dag</span><span class="o">.</span><span class="n">qregs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dag</span><span class="o">.</span><span class="n">qubits</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_layout</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TranspilerError</span><span class="p">(</span><span class="s1">&#39;The layout does not match the amount of qubits in the DAG&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coupling_map</span><span class="o">.</span><span class="n">physical_qubits</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_layout</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TranspilerError</span><span class="p">(</span>
                <span class="s2">&quot;Mappers require to have the layout to be the same size as the coupling map&quot;</span><span class="p">)</span>

        <span class="n">canonical_register</span> <span class="o">=</span> <span class="n">dag</span><span class="o">.</span><span class="n">qregs</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">]</span>
        <span class="n">trivial_layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="o">.</span><span class="n">generate_trivial_layout</span><span class="p">(</span><span class="n">canonical_register</span><span class="p">)</span>
        <span class="n">current_layout</span> <span class="o">=</span> <span class="n">trivial_layout</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">dag</span><span class="o">.</span><span class="n">serial_layers</span><span class="p">():</span>
            <span class="n">subdag</span> <span class="o">=</span> <span class="n">layer</span><span class="p">[</span><span class="s1">&#39;graph&#39;</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">gate</span> <span class="ow">in</span> <span class="n">subdag</span><span class="o">.</span><span class="n">two_qubit_ops</span><span class="p">():</span>
                <span class="n">physical_q0</span> <span class="o">=</span> <span class="n">current_layout</span><span class="p">[</span><span class="n">gate</span><span class="o">.</span><span class="n">qargs</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">physical_q1</span> <span class="o">=</span> <span class="n">current_layout</span><span class="p">[</span><span class="n">gate</span><span class="o">.</span><span class="n">qargs</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">coupling_map</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">physical_q0</span><span class="p">,</span> <span class="n">physical_q1</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c1"># Insert a new layer with the SWAP(s).</span>
                    <span class="n">swap_layer</span> <span class="o">=</span> <span class="n">DAGCircuit</span><span class="p">()</span>
                    <span class="n">swap_layer</span><span class="o">.</span><span class="n">add_qreg</span><span class="p">(</span><span class="n">canonical_register</span><span class="p">)</span>

                    <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coupling_map</span><span class="o">.</span><span class="n">shortest_undirected_path</span><span class="p">(</span><span class="n">physical_q0</span><span class="p">,</span> <span class="n">physical_q1</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">swap</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">):</span>
                        <span class="n">connected_wire_1</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">swap</span><span class="p">]</span>
                        <span class="n">connected_wire_2</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">swap</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

                        <span class="n">qubit_1</span> <span class="o">=</span> <span class="n">current_layout</span><span class="p">[</span><span class="n">connected_wire_1</span><span class="p">]</span>
                        <span class="n">qubit_2</span> <span class="o">=</span> <span class="n">current_layout</span><span class="p">[</span><span class="n">connected_wire_2</span><span class="p">]</span>

                        <span class="c1"># create the swap operation</span>
                        <span class="n">swap_layer</span><span class="o">.</span><span class="n">apply_operation_back</span><span class="p">(</span><span class="n">SwapGate</span><span class="p">(),</span>
                                                        <span class="n">qargs</span><span class="o">=</span><span class="p">[</span><span class="n">qubit_1</span><span class="p">,</span> <span class="n">qubit_2</span><span class="p">],</span>
                                                        <span class="n">cargs</span><span class="o">=</span><span class="p">[])</span>

                    <span class="c1"># layer insertion</span>
                    <span class="n">order</span> <span class="o">=</span> <span class="n">current_layout</span><span class="o">.</span><span class="n">reorder_bits</span><span class="p">(</span><span class="n">new_dag</span><span class="o">.</span><span class="n">qubits</span><span class="p">)</span>
                    <span class="n">new_dag</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">swap_layer</span><span class="p">,</span> <span class="n">qubits</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>

                    <span class="c1"># update current_layout</span>
                    <span class="k">for</span> <span class="n">swap</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">):</span>
                        <span class="n">current_layout</span><span class="o">.</span><span class="n">swap</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="n">swap</span><span class="p">],</span> <span class="n">path</span><span class="p">[</span><span class="n">swap</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>

            <span class="n">order</span> <span class="o">=</span> <span class="n">current_layout</span><span class="o">.</span><span class="n">reorder_bits</span><span class="p">(</span><span class="n">new_dag</span><span class="o">.</span><span class="n">qubits</span><span class="p">)</span>
            <span class="n">new_dag</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">subdag</span><span class="p">,</span> <span class="n">qubits</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_dag</span>
</pre></div>
</div>
</div>
<p>Probemos este pase en un circuito pequeño de ejemplo.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">q</span> <span class="o">=</span> <span class="n">QuantumRegister</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="p">)</span>
<span class="n">in_circ</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="n">in_circ</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">in_circ</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="n">in_circ</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">in_circ</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">in_circ</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">in_circ</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">in_circ</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;qiskit.circuit.instructionset.InstructionSet at 0x7f1f5e2747c0&gt;
</pre></div></div>
</div>
<p>Ahora, construimos el administrador de pases que contiene a nuestro nuevo pase. Pasamos el circuito de ejemplo anterior a este administrador de pases para obtener un nuevo circuito transformado.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.transpiler</span> <span class="kn">import</span> <span class="n">PassManager</span>
<span class="kn">from</span> <span class="nn">qiskit.transpiler</span> <span class="kn">import</span> <span class="n">CouplingMap</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">BasicAer</span>
<span class="n">pm</span> <span class="o">=</span> <span class="n">PassManager</span><span class="p">()</span>
<span class="n">coupling</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="n">coupling_map</span> <span class="o">=</span> <span class="n">CouplingMap</span><span class="p">(</span><span class="n">couplinglist</span><span class="o">=</span><span class="n">coupling</span><span class="p">)</span>

<span class="n">pm</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">BasicSwap</span><span class="p">(</span><span class="n">coupling_map</span><span class="p">)])</span>

<span class="n">out_circ</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">in_circ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
&lt;ipython-input-24-6348c3c81f5c&gt;:50: DeprecationWarning: dag.qubits() and dag.clbits() are no longer methods. Use dag.qubits and dag.clbits properties instead.
  if len(dag.qubits()) != len(self.initial_layout):
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">in_circ</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_48_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_48_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">out_circ</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_49_0.png" src="../../_images/tutorials_circuits_advanced_04_transpiler_passes_and_passmanager_49_0.png" />
</div>
</div>
<p>Tenga en cuenta que este pase solo inserta los swaps necesarios para hacer que todas las interacciones entre dos qubits se ajusten al mapa de acoplamiento del dispositivo. No se preocupa, por ejemplo, de la dirección de las interacciones, o el conjunto de compuertas nativo soportado por el dispositivo. Esta es una filosofía de diseño del transpilador de Qiskit: cada pase realiza una acción pequeña y bien definida, y la optimización agresiva de circuitos es lograda por el administrador de pases mediante una combinación de múltiples pases.</p>
</section>
<section id="Registro-del-Transpilador">
<h2>Registro del Transpilador<a class="headerlink" href="#Registro-del-Transpilador" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Debido a la complejidad de las operaciones internas que el transpilador está realizando, es probable que termines en una situación donde te gustaría depurar un problema o simplemente entender más de lo que está pasando dentro del transpilador cuando lo llamas. Para facilitar esto, el transpilador emite mensajes de registro como parte de su funcionamiento normal. Este registro utiliza el módulo <code class="docutils literal notranslate"><span class="pre">logging</span></code> de la biblioteca estándar de Python para emitir los mensajes de registro. El logging estándar de Python se utilizó porque permite que los registros de Qiskit-Terra se integren de manera estándar con otras aplicaciones y bibliotecas.</p>
<p>Para una introducción más a fondo del logging de Python, consulte la <a class="reference external" href="https://docs.python.org/3/library/logging.html">documentación oficial</a> y los tutoriales y libros de código enlazados ahí.</p>
<div class="alert alert-block alert-success"><p>Nota: la mayoría de las funciones del modulo logging usadas aquí ajustan configuraciones globales. Si corres comandos de esta sección puede que afecte las salidas de otras celdas si son ejecutadas en diferente orden.</p>
</div><section id="Configuración-de-la-librería-Logging-estándar-de-Python">
<h3>Configuración de la librería Logging estándar de Python<a class="headerlink" href="#Configuración-de-la-librería-Logging-estándar-de-Python" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Por defecto, el Logging Estándar de Python solo imprime mensajes de registro a los niveles de registro <code class="docutils literal notranslate"><span class="pre">WARNING</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>, o <code class="docutils literal notranslate"><span class="pre">CRITICAL</span></code>. Ya que ninguno de los registros emitidos por el transpilador usa estos niveles de registro (todos son informativos) tienes que configurar la librería logging.</p>
<p>La forma más sencilla de hacer esto es simplemente ejecutar:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>La función <code class="docutils literal notranslate"><span class="pre">basicConfig()</span></code> (ver la documentación aquí: <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.basicConfig">https://docs.python.org/3/library/logging.html#logging.basicConfig</a>) configura un manipulador de raíz y un formateador. También especificamos el <a class="reference external" href="https://docs.python.org/3/library/logging.html#levels">nivel de registro</a> para mostrar con el kwarg <code class="docutils literal notranslate"><span class="pre">level</span></code>. Configurarlo a un nivel también va a hacer que incluya los niveles más altos. Por ejemplo, si lo configuras al nivel <code class="docutils literal notranslate"><span class="pre">'INFO'</span></code> además del nivel <code class="docutils literal notranslate"><span class="pre">INFO</span></code> esto también va a incluir los niveles de registro <code class="docutils literal notranslate"><span class="pre">WARNING</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>, and <code class="docutils literal notranslate"><span class="pre">CRITICAL</span></code>.</p>
<p>Ahora el entorno de python de este cuaderno se configura para emitir mensajes de registro a stderr cuando corras el transpilador. Por ejemplo:</p>
<div class="alert alert-block alert-success"><p>Nota: basicConfig() solo va a funcionar cuando se ejecute por primera vez. Detecta si un manipulador de raíz y un formateador ya han sido configurados (utilizando una corrida anterior de basicConfig() o de otra manera) y no hace nada si ya fueron configurados. Ajustes adicionales tendrán que se hechos interactuando con el manipulador directamente.</p>
</div><div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.test.mock</span> <span class="kn">import</span> <span class="n">FakeTenerife</span>


<span class="n">log_circ</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">log_circ</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">log_circ</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">log_circ</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">log_circ</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">log_circ</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">log_circ</span><span class="o">.</span><span class="n">measure</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="n">backend</span> <span class="o">=</span> <span class="n">FakeTenerife</span><span class="p">()</span>

<span class="n">transpile</span><span class="p">(</span><span class="n">log_circ</span><span class="p">,</span> <span class="n">backend</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:qiskit.transpiler.runningpassmanager:Pass: SetLayout - 0.00477 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: TrivialLayout - 0.04864 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Layout2qDistance - 0.45657 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FullAncillaAllocation - 0.08535 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: EnlargeWithAncilla - 0.08416 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: ApplyLayout - 0.64754 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Unroll3qOrMore - 0.05555 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CheckMap - 0.05698 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: UnrollCustomDefinitions - 0.08774 (ms)
INFO:qiskit.transpiler.passes.basis.basis_translator:Begin BasisTranslator from source basis {(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)} to target basis {&#39;cx&#39;, &#39;barrier&#39;, &#39;id&#39;, &#39;reset&#39;, &#39;u3&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;u2&#39;, &#39;snapshot&#39;}.
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Begining basis search from frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}) to frozenset({&#39;reset&#39;, &#39;cx&#39;, &#39;u3&#39;, &#39;barrier&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;id&#39;, &#39;u2&#39;, &#39;snapshot&#39;}).
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}).
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2), (&#39;u3&#39;, 1)}).
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Transformation path:
DEBUG:qiskit.transpiler.passes.basis.basis_translator:x/1 =&gt; []
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:h/1 =&gt; []
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation path search completed in 0.010s.
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Composing transform step: x/1 [] =&gt;
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updating transform for mapped instr (&#39;x&#39;, 1) x, [] from
        ┌───┐
q293_0: ┤ x ├
        └───┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updated transform for mapped instr (&#39;x&#39;, 1) x, [] to
        ┌─────────────┐
q293_0: ┤ U3(pi,0,pi) ├
        └─────────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Composing transform step: h/1 [] =&gt;
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updating transform for mapped instr (&#39;h&#39;, 1) h, [] from
        ┌───┐
q294_0: ┤ h ├
        └───┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updated transform for mapped instr (&#39;h&#39;, 1) h, [] to
        ┌──────────┐
q294_0: ┤ U2(0,pi) ├
        └──────────┘
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation paths composed in 0.020s.
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation instructions replaced in 0.000s.
INFO:qiskit.transpiler.runningpassmanager:Pass: BasisTranslator - 36.93509 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CheckCXDirection - 0.09489 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXDirection - 0.78416 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: RemoveResetInZeroState - 0.03719 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.05436 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.03481 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 1.50800 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.08798 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.03672 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.01812 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 0.23603 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.06080 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.02980 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.01717 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 0.23818 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.07939 (ms)
INFO:qiskit.compiler.transpile:Total Transpile Time - 75.43111 (ms)
</pre></div></div>
</div>
<p>Como puedes ver claramente aquí, al ejecutar <code class="docutils literal notranslate"><span class="pre">transpile()</span></code> ahora imprime dos tipos de mensaje de registro. El primero está al nivel de registro <code class="docutils literal notranslate"><span class="pre">INFO</span></code> y proviene del administrador de pases. Estos muestran cada pase que fue ejecutado y que tanto tardaron. El segundo está al nivel de registro <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> y proviene del pase StochasticSwap y describe la operación interna de ese pase. Es útil para depurar problemas en la operación del pase.</p>
</section>
<section id="Ajustando-el-nivel-de-registro-para-el-transpilador">
<h3>Ajustando el nivel de registro para el transpilador<a class="headerlink" href="#Ajustando-el-nivel-de-registro-para-el-transpilador" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El transpilador qiskit usa un solo espacio de nombres <code class="docutils literal notranslate"><span class="pre">qiskit.transpiler</span></code>, como lo usa <code class="docutils literal notranslate"><span class="pre">logging.getLogger('qiskit.transpiler')</span></code>. Esto hace que sea muy fácil ajustar el nivel de registro solo para el transpilador. Por ejemplo, si solo desea ver los mensajes de registro en el nivel INFO o superior, puede ejecutar:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;qiskit.transpiler&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span>
<span class="n">transpile</span><span class="p">(</span><span class="n">log_circ</span><span class="p">,</span> <span class="n">backend</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:qiskit.transpiler.runningpassmanager:Pass: SetLayout - 0.00572 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: TrivialLayout - 0.04363 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Layout2qDistance - 0.42200 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FullAncillaAllocation - 0.06890 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: EnlargeWithAncilla - 0.08631 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: ApplyLayout - 0.56601 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Unroll3qOrMore - 0.02265 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CheckMap - 0.04959 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: UnrollCustomDefinitions - 0.04530 (ms)
INFO:qiskit.transpiler.passes.basis.basis_translator:Begin BasisTranslator from source basis {(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)} to target basis {&#39;cx&#39;, &#39;barrier&#39;, &#39;id&#39;, &#39;reset&#39;, &#39;u3&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;u2&#39;, &#39;snapshot&#39;}.
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation path search completed in 0.001s.
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation paths composed in 0.001s.
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation instructions replaced in 0.000s.
INFO:qiskit.transpiler.runningpassmanager:Pass: BasisTranslator - 4.98986 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CheckCXDirection - 0.07892 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXDirection - 0.71764 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: RemoveResetInZeroState - 0.02217 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.04625 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.01764 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 2.09403 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.07653 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.02766 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.01836 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 0.25296 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.06986 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.02646 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.01407 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 0.23460 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.05984 (ms)
INFO:qiskit.compiler.transpile:Total Transpile Time - 38.27548 (ms)
</pre></div></div>
</div>
</section>
<section id="Configuración-del-registro-para-lidiar-con-la-ejecución-paralela">
<h3>Configuración del registro para lidiar con la ejecución paralela<a class="headerlink" href="#Configuración-del-registro-para-lidiar-con-la-ejecución-paralela" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Cuando se ejecuta el transpilador con múltiples circuitos, por defecto estos circuitos se transpilan en paralelo. Si desea hacerlo con el registro habilitado y poder entender el mensaje de salida, se necesitan algunos pasos adicionales.</p>
<p>Si habilitas el registro como se hizo arriba, y pasas <code class="docutils literal notranslate"><span class="pre">transpile()</span></code> a múltiples circuitos obtendrás resultados que son difíciles de descifrar. Por ejemplo:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Change log level back to DEBUG</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;qiskit.transpiler&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">)</span>
<span class="c1"># Transpile multiple circuits</span>
<span class="n">circuits</span> <span class="o">=</span> <span class="p">[</span><span class="n">log_circ</span><span class="p">,</span> <span class="n">log_circ</span><span class="p">]</span>
<span class="n">transpile</span><span class="p">(</span><span class="n">circuits</span><span class="p">,</span> <span class="n">backend</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:qiskit.transpiler.runningpassmanager:Pass: SetLayout - 0.01788 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: TrivialLayout - 0.14687 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: SetLayout - 0.01669 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Layout2qDistance - 0.79012 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: TrivialLayout - 0.17047 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Layout2qDistance - 0.97585 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FullAncillaAllocation - 0.22602 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: EnlargeWithAncilla - 0.09418 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FullAncillaAllocation - 0.25630 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: EnlargeWithAncilla - 0.10729 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: ApplyLayout - 0.69308 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: ApplyLayout - 0.62561 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Unroll3qOrMore - 0.02956 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Unroll3qOrMore - 0.02003 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CheckMap - 0.05436 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CheckMap - 0.04601 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: UnrollCustomDefinitions - 0.19526 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: UnrollCustomDefinitions - 0.13828 (ms)
INFO:qiskit.transpiler.passes.basis.basis_translator:Begin BasisTranslator from source basis {(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)} to target basis {&#39;cx&#39;, &#39;barrier&#39;, &#39;id&#39;, &#39;reset&#39;, &#39;u3&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;u2&#39;, &#39;snapshot&#39;}.
INFO:qiskit.transpiler.passes.basis.basis_translator:Begin BasisTranslator from source basis {(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)} to target basis {&#39;cx&#39;, &#39;barrier&#39;, &#39;id&#39;, &#39;reset&#39;, &#39;u3&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;u2&#39;, &#39;snapshot&#39;}.
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Begining basis search from frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}) to frozenset({&#39;reset&#39;, &#39;cx&#39;, &#39;u3&#39;, &#39;barrier&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;id&#39;, &#39;u2&#39;, &#39;snapshot&#39;}).
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}).
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Begining basis search from frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}) to frozenset({&#39;reset&#39;, &#39;cx&#39;, &#39;u3&#39;, &#39;barrier&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;id&#39;, &#39;u2&#39;, &#39;snapshot&#39;}).
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2), (&#39;u3&#39;, 1)}).
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}).
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Transformation path:
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2), (&#39;u3&#39;, 1)}).
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Transformation path:
DEBUG:qiskit.transpiler.passes.basis.basis_translator:x/1 =&gt; []
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:x/1 =&gt; []
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:h/1 =&gt; []
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:h/1 =&gt; []
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation path search completed in 0.015s.
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation path search completed in 0.019s.
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Composing transform step: x/1 [] =&gt;
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Composing transform step: x/1 [] =&gt;
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updating transform for mapped instr (&#39;x&#39;, 1) x, [] from
        ┌───┐
q303_0: ┤ x ├
        └───┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updated transform for mapped instr (&#39;x&#39;, 1) x, [] to
        ┌─────────────┐
q303_0: ┤ U3(pi,0,pi) ├
        └─────────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Composing transform step: h/1 [] =&gt;
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updating transform for mapped instr (&#39;x&#39;, 1) x, [] from
        ┌───┐
q303_0: ┤ x ├
        └───┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updating transform for mapped instr (&#39;h&#39;, 1) h, [] from
        ┌───┐
q304_0: ┤ h ├
        └───┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updated transform for mapped instr (&#39;x&#39;, 1) x, [] to
        ┌─────────────┐
q303_0: ┤ U3(pi,0,pi) ├
        └─────────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updated transform for mapped instr (&#39;h&#39;, 1) h, [] to
        ┌──────────┐
q304_0: ┤ U2(0,pi) ├
        └──────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Composing transform step: h/1 [] =&gt;
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updating transform for mapped instr (&#39;h&#39;, 1) h, [] from
        ┌───┐
q304_0: ┤ h ├
        └───┘
DEBUG:qiskit.transpiler.passes.basis.basis_translator:Updated transform for mapped instr (&#39;h&#39;, 1) h, [] to
        ┌──────────┐
q304_0: ┤ U2(0,pi) ├
        └──────────┘
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation paths composed in 0.025s.
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation instructions replaced in 0.000s.
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation paths composed in 0.026s.
INFO:qiskit.transpiler.runningpassmanager:Pass: BasisTranslator - 49.03197 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CheckCXDirection - 0.13423 (ms)
INFO:qiskit.transpiler.passes.basis.basis_translator:Basis translation instructions replaced in 0.000s.
INFO:qiskit.transpiler.runningpassmanager:Pass: BasisTranslator - 54.11601 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXDirection - 0.91052 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: RemoveResetInZeroState - 0.04077 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CheckCXDirection - 0.15759 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXDirection - 0.79799 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.11158 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.04745 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: RemoveResetInZeroState - 0.04077 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 1.99819 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.08464 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.04339 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.10943 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.03314 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.03242 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 0.21958 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.07629 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.02503 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 2.43950 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.01597 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.12016 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 0.17095 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.05364 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.03505 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.01788 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 0.18024 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.07749 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Depth - 0.03338 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: FixedPoint - 0.01717 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: Optimize1qGates - 0.15736 (ms)
INFO:qiskit.transpiler.runningpassmanager:Pass: CXCancellation - 0.07129 (ms)
INFO:qiskit.compiler.transpile:Total Transpile Time - 195.16397 (ms)
</pre></div></div>
</div>
<p>Como puedes ver, aquí obtenemos mensajes de registro de los 3 circuitos que han sido transpilados juntos. No hay manera de saber cuál pase es parte de la transpilación de qué circuito. Por suerte, el logging de Python proporciona herramientas para lidiar con esto. La mejor manera es simplemente cambiar el <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Formatter">formateador de registro</a> para que incluya información adicional, para que podamos asociar los mensajes de registro al proceso que lo emitió.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(processName)-10s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1">: </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">handlers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Ahora, vuelva a ejecutar <code class="docutils literal notranslate"><span class="pre">transpile()</span></code> y vea el nuevo formateador de registro.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">transpile</span><span class="p">(</span><span class="n">circuits</span><span class="p">,</span> <span class="n">backend</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: SetLayout - 0.01597 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: TrivialLayout - 0.17691 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: SetLayout - 0.01693 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: Layout2qDistance - 1.08218 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: TrivialLayout - 0.11516 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: Layout2qDistance - 0.69022 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: FullAncillaAllocation - 0.16642 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: EnlargeWithAncilla - 0.09775 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: FullAncillaAllocation - 0.31352 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: EnlargeWithAncilla - 0.15903 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: ApplyLayout - 0.44227 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: Unroll3qOrMore - 0.02933 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: CheckMap - 0.05007 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: ApplyLayout - 0.67401 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: UnrollCustomDefinitions - 0.12970 (ms)
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - INFO: Begin BasisTranslator from source basis {(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)} to target basis {&#39;cx&#39;, &#39;barrier&#39;, &#39;id&#39;, &#39;reset&#39;, &#39;u3&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;u2&#39;, &#39;snapshot&#39;}.
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: Unroll3qOrMore - 0.02599 (ms)
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Begining basis search from frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}) to frozenset({&#39;reset&#39;, &#39;cx&#39;, &#39;u3&#39;, &#39;barrier&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;id&#39;, &#39;u2&#39;, &#39;snapshot&#39;}).
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: CheckMap - 0.04196 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: UnrollCustomDefinitions - 0.20337 (ms)
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - INFO: Begin BasisTranslator from source basis {(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)} to target basis {&#39;cx&#39;, &#39;barrier&#39;, &#39;id&#39;, &#39;reset&#39;, &#39;u3&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;u2&#39;, &#39;snapshot&#39;}.
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}).
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Begining basis search from frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}) to frozenset({&#39;reset&#39;, &#39;cx&#39;, &#39;u3&#39;, &#39;barrier&#39;, &#39;u1&#39;, &#39;measure&#39;, &#39;id&#39;, &#39;u2&#39;, &#39;snapshot&#39;}).
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2), (&#39;u3&#39;, 1)}).
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;x&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2)}).
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Inspecting basis frozenset({(&#39;measure&#39;, 1), (&#39;h&#39;, 1), (&#39;cx&#39;, 2), (&#39;u3&#39;, 1)}).
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Transformation path:
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Transformation path:
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: x/1 =&gt; []
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: x/1 =&gt; []
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: h/1 =&gt; []
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: h/1 =&gt; []
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - INFO: Basis translation path search completed in 0.018s.
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - INFO: Basis translation path search completed in 0.014s.
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Composing transform step: x/1 [] =&gt;
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Composing transform step: x/1 [] =&gt;
     ┌─────────────┐
q_0: ┤ U3(pi,0,pi) ├
     └─────────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Updating transform for mapped instr (&#39;x&#39;, 1) x, [] from
        ┌───┐
q303_0: ┤ x ├
        └───┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Updating transform for mapped instr (&#39;x&#39;, 1) x, [] from
        ┌───┐
q303_0: ┤ x ├
        └───┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Updated transform for mapped instr (&#39;x&#39;, 1) x, [] to
        ┌─────────────┐
q303_0: ┤ U3(pi,0,pi) ├
        └─────────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Updated transform for mapped instr (&#39;x&#39;, 1) x, [] to
        ┌─────────────┐
q303_0: ┤ U3(pi,0,pi) ├
        └─────────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Composing transform step: h/1 [] =&gt;
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Composing transform step: h/1 [] =&gt;
     ┌──────────┐
q_0: ┤ U2(0,pi) ├
     └──────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Updating transform for mapped instr (&#39;h&#39;, 1) h, [] from
        ┌───┐
q304_0: ┤ h ├
        └───┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Updating transform for mapped instr (&#39;h&#39;, 1) h, [] from
        ┌───┐
q304_0: ┤ h ├
        └───┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - DEBUG: Updated transform for mapped instr (&#39;h&#39;, 1) h, [] to
        ┌──────────┐
q304_0: ┤ U2(0,pi) ├
        └──────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - DEBUG: Updated transform for mapped instr (&#39;h&#39;, 1) h, [] to
        ┌──────────┐
q304_0: ┤ U2(0,pi) ├
        └──────────┘
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - INFO: Basis translation paths composed in 0.020s.
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - INFO: Basis translation paths composed in 0.020s.
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-5 - INFO: Basis translation instructions replaced in 0.000s.
qiskit.transpiler.passes.basis.basis_translator - ForkProcess-6 - INFO: Basis translation instructions replaced in 0.000s.
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: BasisTranslator - 40.80915 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: BasisTranslator - 45.52960 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: CheckCXDirection - 0.11969 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: CheckCXDirection - 0.13542 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: CXDirection - 0.81277 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: CXDirection - 0.93150 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: RemoveResetInZeroState - 0.03934 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: RemoveResetInZeroState - 0.04005 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: Depth - 0.12755 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: Depth - 0.09656 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: FixedPoint - 0.03791 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: FixedPoint - 0.04053 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: Optimize1qGates - 2.46310 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: CXCancellation - 0.13208 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: Depth - 0.03552 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: FixedPoint - 0.02217 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: Optimize1qGates - 2.03133 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: CXCancellation - 0.14567 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: Optimize1qGates - 0.18024 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: CXCancellation - 0.07057 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: Depth - 0.04125 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: FixedPoint - 0.02265 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: Depth - 0.03672 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: Optimize1qGates - 0.31304 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: FixedPoint - 0.01884 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-6 - INFO: Pass: CXCancellation - 0.06986 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: Optimize1qGates - 0.17571 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: CXCancellation - 0.19479 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: Depth - 0.04315 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: FixedPoint - 0.02480 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: Optimize1qGates - 0.43654 (ms)
qiskit.transpiler.runningpassmanager - ForkProcess-5 - INFO: Pass: CXCancellation - 0.05555 (ms)
qiskit.compiler.transpile - MainProcess - INFO: Total Transpile Time - 172.73402 (ms)
</pre></div></div>
</div>
<p>Ahora el formato de mensajes de registro ha sido cambiado e incluye el nombre del proceso para cada proceso de transpilación para que por lo menos sea claro que mensajes de registro van juntos.</p>
<p>Hay muchas opciones de como puedes configurar, este ejemplo es bastante limitado. Consulta la documentación para más ejemplos y opciones para construir casos de uso más sofisticados que se adapten a tu caso especifico o a tus preferencias.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">qiskit.tools.jupyter</span>
<span class="o">%</span><span class="k">qiskit_version_table</span>
<span class="o">%</span><span class="k">qiskit_copyright</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<h3>Version Information</h3><table><tr><th>Qiskit Software</th><th>Version</th></tr><tr><td>Qiskit</td><td>0.20.0</td></tr><tr><td>Terra</td><td>0.15.1</td></tr><tr><td>Aer</td><td>0.6.1</td></tr><tr><td>Ignis</td><td>0.4.0</td></tr><tr><td>Aqua</td><td>0.7.5</td></tr><tr><td>IBM Q Provider</td><td>0.8.0</td></tr><tr><th>System information</th></tr><tr><td>Python</td><td>3.8.5 | packaged by conda-forge | (default, Jul 31 2020, 02:39:48)
[GCC 7.5.0]</td></tr><tr><td>OS</td><td>Linux</td></tr><tr><td>CPUs</td><td>4</td></tr><tr><td>Memory (Gb)</td><td>30.82091522216797</td></tr><tr><td colspan='2'>Tue Sep 08 13:39:41 2020 EDT</td></tr></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style='width: 100%; background-color:#d5d9e0;padding-left: 10px; padding-bottom: 10px; padding-right: 10px; padding-top: 5px'><h3>This code is a part of Qiskit</h3><p>&copy; Copyright IBM 2017, 2020.</p><p>This code is licensed under the Apache License, Version 2.0. You may<br>obtain a copy of this license in the LICENSE.txt file in the root directory<br> of this source tree or at http://www.apache.org/licenses/LICENSE-2.0.<p>Any modifications or derivative works of this code must retain this<br>copyright notice, and modified files need to carry a notice indicating<br>that they have been altered from the originals.</p></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</section>
</section>
</section>


             </article>
             
            </div>
            <footer>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Qiskit Development Team.
      Actualizado por última vez en 2021/10/02.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">Pases al Transpilador y administrador de pases</a><ul>
<li><a class="reference internal" href="#Introducción">Introducción</a></li>
<li><a class="reference internal" href="#Objeto-PassManager">Objeto PassManager</a></li>
<li><a class="reference internal" href="#Diferentes-variantes-del-mismo-pase">Diferentes variantes del mismo pase</a></li>
<li><a class="reference internal" href="#Administradores-de-pases-Preestablecidos">Administradores de pases Preestablecidos</a></li>
<li><a class="reference internal" href="#Introducción-al-DAG">Introducción al DAG</a></li>
<li><a class="reference internal" href="#Implementación-de-un-pase-de-BasicMapper">Implementación de un pase de BasicMapper</a></li>
<li><a class="reference internal" href="#Registro-del-Transpilador">Registro del Transpilador</a><ul>
<li><a class="reference internal" href="#Configuración-de-la-librería-Logging-estándar-de-Python">Configuración de la librería Logging estándar de Python</a></li>
<li><a class="reference internal" href="#Ajustando-el-nivel-de-registro-para-el-transpilador">Ajustando el nivel de registro para el transpilador</a></li>
<li><a class="reference internal" href="#Configuración-del-registro-para-lidiar-con-la-ejecución-paralela">Configuración del registro para lidiar con la ejecución paralela</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
         <script src="../../_static/jquery.js"></script>
         <script src="../../_static/underscore.js"></script>
         <script src="../../_static/doctools.js"></script>
         <script src="../../_static/language_data.js"></script>
         <script src="../../_static/thebelab-helper.js"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
         <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
         <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
         <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
         <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
     

  

  <script type="text/javascript" src="../../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <div>
    <br>
  </div>

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://qiskit.org/" aria-label="PyTorch"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="../../getting_started.html">Getting Started</a>
          </li>
          <li>
            <a href="../../tutorials.html">Tutorials</a>
          </li>
          <li>
            <a href="https://qiskit.org/documentation/partners/">Partners</a>
          </li>
          <br>
          <li class="resources-mobile-menu-title">
            Applications
          </li>
          <ul class="resources-mobile-menu-items">
            <li>
              <a href="https://qiskit.org/documentation/machine-learning/">Machine learning</a>
            </li>

            <li>
              <a href="https://qiskit.org/documentation/nature/">Nature</a>
            </li>

            <li>
              <a href="https://qiskit.org/documentation/finance/">Finance</a>
            </li>

            <li>
              <a href="https://qiskit.org/documentation/optimization/">Optimization</a>
            </li>
          </ul>
          <br>
          <li>
            <a href="https://qiskit.org/documentation/experiments/">Experiments</a>
          </li>
          <br>
          <li class="resources-mobile-menu-title">
            Resources
          </li>

          <ul class="resources-mobile-menu-items">
            <li>
              <a href="https://qiskit.slack.com">Slack support</a>
            </li>
          </ul>
          <br>
        </ul>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>