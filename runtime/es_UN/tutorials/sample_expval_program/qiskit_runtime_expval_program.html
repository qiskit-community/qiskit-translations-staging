


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="es-UN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="es-UN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Programa de Valor Esperado Personalizado para Qiskit Runtime &mdash; documentación de Qiskit Runtime IBM Client - 0.6.1</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="Alineación del Kernel Cuántico con Qiskit Runtime" href="../qka.html" />
    <link rel="prev" title="Creación de Programas Personalizados para Qiskit Runtime" href="../sample_vqe_program/qiskit_runtime_vqe_program.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://qiskit.org/" aria-label="PyTorch"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="../../getting_started.html">Getting started</a>
          </li>

          <li>
            <a href="../../tutorials.html">Tutorials</a>
          </li>

          <li>
            <a href="https://qiskit.org/documentation/partners/" target="_blank">Qiskit Providers</a>
          </li>

          <li>
            <div id="resourcesDropdownButton" data-toggle="resources-dropdown" class="resources-dropdown">
              <a class="resource-option with-down-orange-arrow">
                Applications
              </a>
              <div class="resources-dropdown-menu">
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/machine-learning/">
                  <span class="dropdown-title">Machine learning</span>
                  <p>QSVM, VQC (Variational Quantum Classifier), and QGAN (Quantum Generative
                    Adversarial Network) algorithms.</p>
                </a>
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/nature/">
                  <span class="dropdown-title">Nature</span>
                  <p>Quantum applications in chemistry, physics, and biology.</p>
                </a>
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/finance/">
                  <span class="dropdown-title">Finance</span>
                  <p>Uncertainty components for stock/securities problems, Ising translators for
                    portfolio optimizations and data providers to source real or random data.</p>
                </a>
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/optimization/">
                  <span class="dropdown-title">Optimization</span>
                  <p>High-level optimization problems that are ready to
                    run on simulators and real quantum devices</p>
                </a>
              </div>
          </li>

          <li>
            <div id="resourcesDropdownButton" data-toggle="resources-dropdown" class="resources-dropdown">
              <a class="resource-option with-down-orange-arrow">
                Resources
              </a>
              <div class="resources-dropdown-menu">
                <a class="doc-dropdown-option nav-dropdown-item" href="https://qiskit.slack.com">
                  <span class="dropdown-title">Slack support</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://qiskit.org/textbook">
                  <span class="dropdown-title">Qiskit Textbook</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://qiskit.org/events">
                  <span class="dropdown-title">Qiskit events</span>
                  <p></p>
                </a>
            </div>
          </li>
          <li>
            <a href="https://github.com/Qiskit/qiskit-ibm-runtime" target="_blank">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>


<body class="pytorch-body">

   

    

    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="rst-current-version-label">Spanish</span>
    <span class="rst-versions-dropdown-icon"></span>
  </span>
  <div class="rst-other-versions">
    
    <dl>
      <dt>Idiomas</dt>
      
        <dd><a class="version" href="/documentation/partners/qiskit_ibm_runtime/tutorials/sample_expval_program/qiskit_runtime_expval_program.html">English</a></dd>
      
        <dd><a class="version" href="/documentation/partners/qiskit_ibm_runtime/locale/ja_JP/tutorials/sample_expval_program/qiskit_runtime_expval_program.html">Japanese</a></dd>
      
        <dd><a class="version" href="/documentation/partners/qiskit_ibm_runtime/locale/es_UN/tutorials/sample_expval_program/qiskit_runtime_expval_program.html">Spanish</a></dd>
      
    </dl>
    
  </div>
  <script>
    jQuery('.version').click((evt) => {
      const hash = window.location.hash
      const complete_url = evt.target.href + hash
      window.location = complete_url
      evt.preventDefault()
    })
  </script>
</div>

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Descripción General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Primeros Pasos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorials.html">Tutoriales</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to.html">Cómo Hacerlo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidocs/ibm-runtime.html">Referencia de la API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faqs.html">Preguntas Frecuentes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Notas de la Versión</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Qiskit/qiskit-ibm-runtime">GitHub</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
          <li><a href="../../tutorials.html">Tutoriales</a> &gt;</li>
        
      <li>Programa de Valor Esperado Personalizado para Qiskit Runtime</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/sample_expval_program/qiskit_runtime_expval_program.ipynb" rel="nofollow"><img src="../../_static/images/view-page-source-icon.svg"></a>
          
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">
          
          <div class="rst-content style-external-links">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Esta página fue generada a partir de <a class="reference external" href="https://github.com/Qiskit/qiskit-ibm-runtime/blob/stable/0.6/docs/tutorials/sample_expval_program/qiskit_runtime_expval_program.ipynb">docs/tutorials/sample_expval_program/qiskit_runtime_expval_program.ipynb</a>.</p>
</div>
<section id="Programa-de-Valor-Esperado-Personalizado-para-Qiskit-Runtime">
<h1>Programa de Valor Esperado Personalizado para Qiskit Runtime<a class="headerlink" href="#Programa-de-Valor-Esperado-Personalizado-para-Qiskit-Runtime" title="Permalink to this heading">¶</a></h1>
<p><p>Paul Nation</p>
</p><p><p>Equipo de Habilitación Técnica de IBM Quantum Partners</p>
</p><p>Aquí vamos a mostrar cómo hacer un programa que toma un circuito, o lista de circuitos, y calcula los valores esperados de uno o más operadores diagonales.</p>
<section id="Requisitos-previos">
<h2>Requisitos previos<a class="headerlink" href="#Requisitos-previos" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Debes tener instalado el último Qiskit.</p></li>
<li><p>Debes tener una cuenta de IBM Cloud o IBM Quantum que pueda acceder a Qiskit Runtime.</p></li>
</ul>
</section>
<section id="Antecedentes">
<h2>Antecedentes<a class="headerlink" href="#Antecedentes" title="Permalink to this heading">¶</a></h2>
<p>El método principal por el cual se obtiene información de las computadoras cuánticas es a través de valores esperados. De hecho, las muestras que provienen de ejecutar un circuito cuántico varias veces, una vez convertidas en probabilidades, pueden verse como una aproximación de muestra finita al valor esperado para los operadores de proyección correspondientes a cada cadena de bits. De manera más práctica, muchos algoritmos cuánticos requieren calcular los valores esperados sobre los operadores de Pauli, por ejemplo, Solucionadores Propios Cuánticos Variacionales y, por lo tanto, tener un programa runtime que calcule estas cantidades es de fundamental importancia. Aquí vemos uno de esos ejemplos, donde un usuario pasa uno o más circuitos y operadores esperanza y obtiene los valores esperados calculados y posiblemente los límites de error.</p>
<section id="Valor-esperado-de-un-operador-diagonal">
<h3>Valor esperado de un operador diagonal<a class="headerlink" href="#Valor-esperado-de-un-operador-diagonal" title="Permalink to this heading">¶</a></h3>
<p>Considera un observable genérico dado por el producto tensorial de operadores diagonales sobre <span class="math notranslate nohighlight">\(N\)</span> qubits <span class="math notranslate nohighlight">\(O = O_{N-1}\dots O_{0}\)</span> donde el subíndice indica el qubit sobre el que actúa el operador. Luego, para un conjunto de <span class="math notranslate nohighlight">\(M\)</span> cadenas de bits observadas <span class="math notranslate nohighlight">\(\{b_{0}, \dots b_{M-1}\}\)</span>, donde <span class="math notranslate nohighlight">\(M \leq 2^N\)</span>, con las probabilidades aproximadas correspondientes <span class="math notranslate nohighlight">\(p_{m}\)</span>, el valor esperado viene dado por</p>
<div class="math notranslate nohighlight">
\[\langle O\rangle \simeq \sum_{m=0}^{M-1} p_{m}\prod_{n=0}^{N-1}O_{n}[b_{m}[N-n-1], b_{m}[N-n-1]],\]</div>
<p>donde <span class="math notranslate nohighlight">\(O_{n}[b_{m}[N-n-1], b_{m}[N-n-1]]\)</span> es el elemento diagonal de <span class="math notranslate nohighlight">\(O_{n}\)</span> especificado por el bit <span class="math notranslate nohighlight">\(N-n-1\)</span> en la cadena de bits <span class="math notranslate nohighlight">\(b_{m}\)</span>. La razón de la indexación complicada en <code class="docutils literal notranslate"><span class="pre">b_{m}</span></code> se debe a que Qiskit usa la indexación de bits menos significativa donde el elemento cero de las cadenas de bits viene dado por el bit más a la derecha.</p>
<p>Aquí usaremos rutinas integradas para calcular estos valores esperados. Sin embargo, no es difícil hacerlo por ti mismo, con muchos ejemplos por encontrar.</p>
</section>
</section>
<section id="Programa-principal">
<h2>Programa principal<a class="headerlink" href="#Programa-principal" title="Permalink to this heading">¶</a></h2>
<p>Aquí definimos nuestra función principal para el programa runtime del valor esperado. Como siempre, nuestro programa debe comenzar con los argumentos <code class="docutils literal notranslate"><span class="pre">backend</span></code> y <code class="docutils literal notranslate"><span class="pre">user_messenger</span></code>, seguidos de las entradas reales que le pasamos al programa. Aquí nuestras opciones son bastante simples:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">circuits</span></code>: Un solo QuantumCircuit o una lista de QuantumCircuits que se ejecutarán en el backend de destino.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expectation_operators</span></code>: Los operadores que queremos evaluar. Estos pueden ser cadenas de Pauli diagonales, por ejemplo, <code class="docutils literal notranslate"><span class="pre">ZIZZ</span></code>, u operadores personalizados definidos con diccionarios. Por ejemplo, el operador de proyección en el estado de todos unos de 4 qubits es <code class="docutils literal notranslate"><span class="pre">{'1111':</span> <span class="pre">1}</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shots</span></code>: Cuántas veces muestrear cada circuito.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transpiler_config</span></code>: Un diccionario que pasa argumentos adicionales a la función de transpilación, por ejemplo <code class="docutils literal notranslate"><span class="pre">optimization_level</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_config</span></code>: Un diccionario que pasa argumentos adicionales a <code class="docutils literal notranslate"><span class="pre">backend.run()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skip_transpilation</span></code>: Una bandera para omitir la transpilación por completo y simplemente ejecutar los circuitos. Esto es útil para situaciones en las que necesitas transpilar circuitos parametrizados una vez, pero se deben vincular parámetros varias veces y evaluar.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">return_stddev</span></code>: Bandera para devolver el límite de la desviación estándar. Si usas la mitigación de medición, esto agrega algo de sobrecarga al cálculo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_measurement_mitigation</span></code>: Usar la mitigación de medición M3 y calcular el valor esperado y el límite de desviación estándar de las cuasi probabilidades.</p></li>
</ul>
<p>En la parte superior de la celda a continuación, verás un <code class="docutils literal notranslate"><span class="pre">%%writefile</span> <span class="pre">sample_expval.py</span></code> comentado. Usaremos esto para convertir la celda en un módulo de Python llamado <code class="docutils literal notranslate"><span class="pre">sample_expval.py</span></code> para cargar.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#%%writefile sample_expval.py</span>
<span class="kn">import</span> <span class="nn">mthree</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">transpile</span>

<span class="c1"># The entrypoint for our Runtime Program</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span>
    <span class="n">backend</span><span class="p">,</span>
    <span class="n">user_messenger</span><span class="p">,</span>
    <span class="n">circuits</span><span class="p">,</span>
    <span class="n">expectation_operators</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">shots</span><span class="o">=</span><span class="mi">8192</span><span class="p">,</span>
    <span class="n">transpiler_config</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">run_config</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">skip_transpilation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">return_stddev</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">use_measurement_mitigation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Compute expectation</span>
<span class="sd">    values for a list of operators after</span>
<span class="sd">    executing a list of circuits on the target backend.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        backend (ProgramBackend): Qiskit backend instance.</span>
<span class="sd">        user_messenger (UserMessenger): Used to communicate with the program user.</span>
<span class="sd">        circuits: (QuantumCircuit or list): A single list of QuantumCircuits.</span>
<span class="sd">        expectation_operators (str or dict or list): Expectation values to evaluate.</span>
<span class="sd">        shots (int): Number of shots to take per circuit.</span>
<span class="sd">        transpiler_config (dict): A collection of kwargs passed to transpile().</span>
<span class="sd">        run_config (dict): A collection of kwargs passed to backend.run().</span>
<span class="sd">        skip_transpilation (bool): Skip transpiling of circuits, default=False.</span>
<span class="sd">        return_stddev (bool): Return upper bound on standard devitation,</span>
<span class="sd">                              default=False.</span>
<span class="sd">        use_measurement_mitigation (bool): Improve resulting using measurement</span>
<span class="sd">                                           error mitigation, default=False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        array_like: Returns array of expectation values or a list of (expval, stddev)</span>
<span class="sd">                    tuples if return_stddev=True.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># transpiling the circuits using given transpile options</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_transpilation</span><span class="p">:</span>
        <span class="n">trans_circuits</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">circuits</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="o">**</span><span class="n">transpiler_config</span><span class="p">)</span>
        <span class="c1"># Make sure everything is a list</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trans_circuits</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">trans_circuits</span> <span class="o">=</span> <span class="p">[</span><span class="n">trans_circuits</span><span class="p">]</span>
    <span class="c1"># If skipping set circuits -&gt; trans_circuits</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">circuits</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">trans_circuits</span> <span class="o">=</span> <span class="p">[</span><span class="n">circuits</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">trans_circuits</span> <span class="o">=</span> <span class="n">circuits</span>

    <span class="c1"># If we are given a single circuit but requesting multiple expectation</span>
    <span class="c1"># values, then set flag to make multiple pointers to same result.</span>
    <span class="n">duplicate_results</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expectation_operators</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expectation_operators</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">trans_circuits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">duplicate_results</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># If doing measurement mitigation we must build and calibrate a</span>
    <span class="c1"># mitigator object.  Will also determine which qubits need to be</span>
    <span class="c1"># calibrated.</span>
    <span class="k">if</span> <span class="n">use_measurement_mitigation</span><span class="p">:</span>
        <span class="c1"># Get an the measurement mappings at end of circuits</span>
        <span class="n">meas_maps</span> <span class="o">=</span> <span class="n">mthree</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">final_measurement_mapping</span><span class="p">(</span><span class="n">trans_circuits</span><span class="p">)</span>
        <span class="c1"># Get an M3 mitigator</span>
        <span class="n">mit</span> <span class="o">=</span> <span class="n">mthree</span><span class="o">.</span><span class="n">M3Mitigation</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span>
        <span class="c1"># Calibrate over the set of qubits measured in the transpiled circuits.</span>
        <span class="n">mit</span><span class="o">.</span><span class="n">cals_from_system</span><span class="p">(</span><span class="n">meas_maps</span><span class="p">)</span>

    <span class="c1"># Compute raw results</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">trans_circuits</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="n">shots</span><span class="p">,</span> <span class="o">**</span><span class="n">run_config</span><span class="p">)</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
    <span class="n">raw_counts</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>

    <span class="c1"># When using measurement mitigation we need to apply the correction and then</span>
    <span class="c1"># compute the expectation values from the computed quasi-probabilities.</span>
    <span class="k">if</span> <span class="n">use_measurement_mitigation</span><span class="p">:</span>
        <span class="n">quasi_dists</span> <span class="o">=</span> <span class="n">mit</span><span class="o">.</span><span class="n">apply_correction</span><span class="p">(</span>
            <span class="n">raw_counts</span><span class="p">,</span> <span class="n">meas_maps</span><span class="p">,</span> <span class="n">return_mitigation_overhead</span><span class="o">=</span><span class="n">return_stddev</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">duplicate_results</span><span class="p">:</span>
            <span class="n">quasi_dists</span> <span class="o">=</span> <span class="n">mthree</span><span class="o">.</span><span class="n">classes</span><span class="o">.</span><span class="n">QuasiCollection</span><span class="p">(</span>
                <span class="p">[</span><span class="n">quasi_dists</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">expectation_operators</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># There are two different calls depending on what we want returned.</span>
        <span class="k">if</span> <span class="n">return_stddev</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">quasi_dists</span><span class="o">.</span><span class="n">expval_and_stddev</span><span class="p">(</span><span class="n">expectation_operators</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">quasi_dists</span><span class="o">.</span><span class="n">expval</span><span class="p">(</span><span class="n">expectation_operators</span><span class="p">)</span>

    <span class="c1"># If the program didn&#39;t return in the mitigation loop above it means</span>
    <span class="c1"># we are processing the raw_counts data.  We do so here using the</span>
    <span class="c1"># mthree utilities</span>
    <span class="k">if</span> <span class="n">duplicate_results</span><span class="p">:</span>
        <span class="n">raw_counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">raw_counts</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">expectation_operators</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">return_stddev</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">mthree</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">expval_and_stddev</span><span class="p">(</span><span class="n">raw_counts</span><span class="p">,</span> <span class="n">expectation_operators</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mthree</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">expval</span><span class="p">(</span><span class="n">raw_counts</span><span class="p">,</span> <span class="n">expectation_operators</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Pruebas-locales">
<h2>Pruebas locales<a class="headerlink" href="#Pruebas-locales" title="Permalink to this heading">¶</a></h2>
<p>Aquí probamos con un backend local “Falso” que imita las propiedades de ruido de un sistema real y un estado GHZ de 4 qubits.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>
<span class="kn">from</span> <span class="nn">qiskit.providers.fake_provider</span> <span class="kn">import</span> <span class="n">FakeSantiago</span>
<span class="kn">from</span> <span class="nn">qiskit_ibm_runtime.program</span> <span class="kn">import</span> <span class="n">UserMessenger</span>

<span class="n">msg</span> <span class="o">=</span> <span class="n">UserMessenger</span><span class="p">()</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">FakeSantiago</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">main</span><span class="p">(</span>
    <span class="n">backend</span><span class="p">,</span>
    <span class="n">msg</span><span class="p">,</span>
    <span class="n">qc</span><span class="p">,</span>
    <span class="n">expectation_operators</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ZZZZ&quot;</span><span class="p">,</span> <span class="s2">&quot;IIII&quot;</span><span class="p">,</span> <span class="s2">&quot;IZZZ&quot;</span><span class="p">],</span>
    <span class="n">transpiler_config</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;optimization_level&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;layout_method&quot;</span><span class="p">:</span> <span class="s2">&quot;sabre&quot;</span><span class="p">,</span>
        <span class="s2">&quot;routing_method&quot;</span><span class="p">:</span> <span class="s2">&quot;sabre&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">run_config</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">skip_transpilation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">return_stddev</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">use_measurement_mitigation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([0.97984243, 1.        , 0.02518419])
</pre></div></div>
</div>
<p>Si hemos hecho nuestro trabajo correctamente, lo anterior debería imprimir dos valores esperados cercanos a uno y un valor esperado final cercano a cero.</p>
</section>
<section id="Metadatos-del-programa">
<h2>Metadatos del programa<a class="headerlink" href="#Metadatos-del-programa" title="Permalink to this heading">¶</a></h2>
<p>A continuación, agregamos los datos de programa necesarios a un diccionario para cargarlos con nuestro programa.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meta</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;sample-expval&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A sample expectation value program.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;max_execution_time&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s2">&quot;spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
<span class="p">}</span>

<span class="n">meta</span><span class="p">[</span><span class="s2">&quot;spec&quot;</span><span class="p">][</span><span class="s2">&quot;parameters&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;$schema&quot;</span><span class="p">:</span> <span class="s2">&quot;https://json-schema.org/draft/2019-09/schema&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;circuits&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A single or list of QuantumCircuits.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;array&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">],</span>
        <span class="p">},</span>
        <span class="s2">&quot;expectation_operators&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;One or more expectation values to evaluate.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;array&quot;</span><span class="p">],</span>
        <span class="p">},</span>
        <span class="s2">&quot;shots&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Number of shots per circuit.&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">},</span>
        <span class="s2">&quot;transpiler_config&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A collection of kwargs passed to transpile.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;run_config&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A collection of kwargs passed to backend.run. Default is False.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;return_stddev&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Return upper-bound on standard deviation. Default is False.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;use_measurement_mitigation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Use measurement mitigation to improve results. Default is False.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;circuits&quot;</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">meta</span><span class="p">[</span><span class="s2">&quot;spec&quot;</span><span class="p">][</span><span class="s2">&quot;return_values&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;$schema&quot;</span><span class="p">:</span> <span class="s2">&quot;https://json-schema.org/draft/2019-09/schema&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A list of expectation values and optionally standard deviations.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="Cagar-el-programa">
<h2>Cagar el programa<a class="headerlink" href="#Cagar-el-programa" title="Permalink to this heading">¶</a></h2>
<p>Ahora estamos en condiciones de cargar el programa. Para hacerlo, primero descomentamos y ejecutamos la línea <code class="docutils literal notranslate"><span class="pre">%%writefile</span> <span class="pre">sample_expval.py</span></code> dando uso al archivo <code class="docutils literal notranslate"><span class="pre">sample_expval.py</span></code> que necesitamos cargar.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qiskit_ibm_runtime</span> <span class="kn">import</span> <span class="n">QiskitRuntimeService</span>

<span class="n">service</span> <span class="o">=</span> <span class="n">QiskitRuntimeService</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="s2">&quot;ibm_quantum&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">program_id</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">upload_program</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s2">&quot;sample_expval.py&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">meta</span><span class="p">)</span>
<span class="n">program_id</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;sample-expval-RL2YzPQEe1&#39;
</pre></div></div>
</div>
<section id="Eliminar-el-programa-si-es-necesario">
<h3>Eliminar el programa si es necesario<a class="headerlink" href="#Eliminar-el-programa-si-es-necesario" title="Permalink to this heading">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># service.delete_program(program_id)</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="Encapsular-el-programa-runtime">
<h2>Encapsular el programa runtime<a class="headerlink" href="#Encapsular-el-programa-runtime" title="Permalink to this heading">¶</a></h2>
<p>Como siempre, es mejor encapsular la llamada al programa runtime con una función (o posiblemente una clase) que facilite la entrada y realice alguna validación.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">expectation_value_runner</span><span class="p">(</span>
    <span class="n">backend</span><span class="p">,</span>
    <span class="n">circuits</span><span class="p">,</span>
    <span class="n">expectation_operators</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">shots</span><span class="o">=</span><span class="mi">8192</span><span class="p">,</span>
    <span class="n">transpiler_config</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">run_config</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">skip_transpilation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">return_stddev</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">use_measurement_mitigation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Compute expectation values for a list of operators after</span>
<span class="sd">    executing a list of circuits on the target backend.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        backend (Backend or str): Qiskit backend instance or name.</span>
<span class="sd">        circuits: (QuantumCircuit or list): A single or list of QuantumCircuits.</span>
<span class="sd">        expectation_operators (str or dict or list): Expectation values to evaluate.</span>
<span class="sd">        shots (int): Number of shots to take per circuit.</span>
<span class="sd">        transpiler_config (dict): A collection of kwargs passed to transpile().</span>
<span class="sd">        run_config (dict): A collection of kwargs passed to backend.run().</span>
<span class="sd">        return_stddev (bool): Return upper bound on standard devitation,</span>
<span class="sd">                              default=False.</span>
<span class="sd">        skip_transpilation (bool): Skip transpiling of circuits, default=False.</span>
<span class="sd">        use_measurement_mitigation (bool): Improve resulting using measurement</span>
<span class="sd">                                           error mitigation, default=False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        array_like: Returns array of expectation values or a list of (expval, stddev)</span>
<span class="sd">                    pairs if return_stddev=True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">backend</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">name</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;backend_name&quot;</span><span class="p">:</span> <span class="n">backend</span><span class="p">}</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">circuits</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuits</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expectation_operators</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuits</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">expectation_operators</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">expectation_operators</span> <span class="o">=</span> <span class="n">expectation_operators</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuits</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuits</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">expectation_operators</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Number of circuits must match number of expectation </span><span class="se">\</span>
<span class="s2">                                  values if more than one of each&quot;</span>
                <span class="p">)</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;circuits&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">circuits</span>
    <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;expectation_operators&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">expectation_operators</span>
    <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;shots&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shots</span>
    <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;transpiler_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transpiler_config</span>
    <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;run_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_config</span>
    <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;return_stddev&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">return_stddev</span>
    <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;skip_transpilation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">skip_transpilation</span>
    <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;use_measurement_mitigation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">use_measurement_mitigation</span>

    <span class="k">return</span> <span class="n">service</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">program_id</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<section id="Intentándolo">
<h3>Intentándolo<a class="headerlink" href="#Intentándolo" title="Permalink to this heading">¶</a></h3>
<p>Intentemos ejecutar el programa aquí con nuestro estado GHZ creado anteriormente y ejecutándolo en el simulador.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">backend</span> <span class="o">=</span> <span class="s2">&quot;ibmq_qasm_simulator&quot;</span>

<span class="n">all_zeros_proj</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;0000&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="n">all_ones_proj</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;1111&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">expectation_value_runner</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="n">qc</span><span class="p">,</span> <span class="p">[</span><span class="n">all_zeros_proj</span><span class="p">,</span> <span class="n">all_ones_proj</span><span class="p">,</span> <span class="s2">&quot;ZZZZ&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([0.50024414, 0.49975586, 1.        ])
</pre></div></div>
</div>
<p>Los primeros dos proyectores deberían ser casi <span class="math notranslate nohighlight">\(0.50\)</span> ya que indican la probabilidad de estar en los estados todos ceros y todos unos, respectivamente, que debería ser 50/50 para nuestro estado GHZ. El valor esperado final de <code class="docutils literal notranslate"><span class="pre">ZZZZ</span></code> debe ser uno, ya que se trata de un GHZ sobre un número par de qubits. Debe ir cerca de cero para un número impar.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qc2</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">qc2</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">qc2</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">qc2</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">qc2</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">all_zeros_proj</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;000&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="n">all_ones_proj</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;111&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="n">job2</span> <span class="o">=</span> <span class="n">expectation_value_runner</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="n">qc2</span><span class="p">,</span> <span class="p">[</span><span class="n">all_zeros_proj</span><span class="p">,</span> <span class="n">all_ones_proj</span><span class="p">,</span> <span class="s2">&quot;ZZZ&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job2</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([ 0.49206543,  0.50793457, -0.01586914])
</pre></div></div>
</div>
</section>
</section>
<section id="Volumen-Cuántico-como-un-valor-esperado">
<h2>Volumen Cuántico como un valor esperado<a class="headerlink" href="#Volumen-Cuántico-como-un-valor-esperado" title="Permalink to this heading">¶</a></h2>
<p>Aquí formulamos QV como un valor esperado de un proyector en los elementos de alto rendimiento en una distribución. Luego podemos usar nuestra rutina de valor esperado para calcular si un circuito dado ha pasado la métrica QV.</p>
<p>QV se define en términos de salidas pesadas de una distribución. Las salidas pesadas son aquellas cadenas de bits que tienen probabilidades por encima del valor medio de la distribución. A continuación, definimos el operador de proyección en el conjunto de cadenas de bits que son salidas pesadas para una distribución dada.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">heavy_projector</span><span class="p">(</span><span class="n">qv_probs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Forms the projection operator onto the heavy-outputs of a given probability distribution.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        qv_probs (dict): A dictionary of bitstrings and associated probabilities.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Projector onto the heavy-set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">median_prob</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">qv_probs</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
    <span class="n">heavy_strs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">qv_probs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="n">median_prob</span><span class="p">:</span>
            <span class="n">heavy_strs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">heavy_strs</span>
</pre></div>
</div>
</div>
<p>Ahora generamos 10 circuitos QV como nuestro conjunto de datos.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">qiskit.quantum_info</span> <span class="kn">import</span> <span class="n">Statevector</span>
<span class="kn">from</span> <span class="nn">qiskit.circuit.library</span> <span class="kn">import</span> <span class="n">QuantumVolume</span>

<span class="c1"># Generate QV circuits</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">qv_circs</span> <span class="o">=</span> <span class="p">[</span><span class="n">QuantumVolume</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<p>A continuación, tenemos que determinar el conjunto pesado de cada circuito a partir de la respuesta ideal, y luego pasar esto a nuestra función de proyector de conjunto pesado que definimos anteriormente.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ideal_probs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Statevector</span><span class="o">.</span><span class="n">from_instruction</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span><span class="o">.</span><span class="n">probabilities_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">circ</span> <span class="ow">in</span> <span class="n">qv_circs</span>
<span class="p">]</span>
<span class="n">heavy_projectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">heavy_projector</span><span class="p">(</span><span class="n">probs</span><span class="p">)</span> <span class="k">for</span> <span class="n">probs</span> <span class="ow">in</span> <span class="n">ideal_probs</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Los circuitos QV no tienen mediciones, por lo que es necesario agregarlas:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">circs</span> <span class="o">=</span> <span class="p">[</span><span class="n">circ</span><span class="o">.</span><span class="n">measure_all</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">circ</span> <span class="ow">in</span> <span class="n">qv_circs</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Con una lista de circuitos y operadores de proyección, ahora solo necesitamos pasar ambos conjuntos a nuestro ejecutador anterior de valor esperado que apunta al backend deseado. También estableceremos los mejores argumentos del transpilador para darnos una gran oportunidad de obtener algunos puntajes de aprobación.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">backend</span> <span class="o">=</span> <span class="s2">&quot;ibmq_manila&quot;</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job3</span> <span class="o">=</span> <span class="n">expectation_value_runner</span><span class="p">(</span>
    <span class="n">backend</span><span class="p">,</span>
    <span class="n">circs</span><span class="p">,</span>
    <span class="n">heavy_projectors</span><span class="p">,</span>
    <span class="n">transpiler_config</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;optimization_level&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;layout_method&quot;</span><span class="p">:</span> <span class="s2">&quot;sabre&quot;</span><span class="p">,</span>
        <span class="s2">&quot;routing_method&quot;</span><span class="p">:</span> <span class="s2">&quot;sabre&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qv_scores</span> <span class="o">=</span> <span class="n">job3</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="n">qv_scores</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([0.60327148, 0.38464355, 0.49145508, 0.59985352, 0.4375    ,
       0.40002441, 0.46362305, 0.48803711, 0.44165039, 0.54614258])
</pre></div></div>
</div>
<p>Una puntuación QV aprobatoria es aquella en la que el valor del proyector pesado está por encima de <span class="math notranslate nohighlight">\(2/3\)</span>. Así que veamos quién pasó:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qv_scores</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([False, False, False, False, False, False, False, False, False,
       False])
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qiskit.tools.jupyter</span> <span class="kn">import</span> <span class="o">*</span>

<span class="o">%</span><span class="k">qiskit_copyright</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style='width: 100%; background-color:#d5d9e0;padding-left: 10px; padding-bottom: 10px; padding-right: 10px; padding-top: 5px'><h3>This code is a part of Qiskit</h3><p>&copy; Copyright IBM 2017, 2022.</p><p>This code is licensed under the Apache License, Version 2.0. You may<br>obtain a copy of this license in the LICENSE.txt file in the root directory<br> of this source tree or at http://www.apache.org/licenses/LICENSE-2.0.<p>Any modifications or derivative works of this code must retain this<br>copyright notice, and modified files need to carry a notice indicating<br>that they have been altered from the originals.</p></div></div>
</div>
</section>
</section>


             </article>
             
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../qka.html" class="btn btn-neutral float-right" title="Alineación del Kernel Cuántico con Qiskit Runtime" accesskey="n" rel="next">Next <img src="../../_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
        <a href="../sample_vqe_program/qiskit_runtime_vqe_program.html" class="btn btn-neutral" title="Creación de Programas Personalizados para Qiskit Runtime" accesskey="p" rel="prev"><img src="../../_static/images/chevron-right-orange.svg" class="previous-page"> Previous</a>
      
    </div>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Qiskit Development Team.
      Actualizado por última vez en 2022/07/16.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">Programa de Valor Esperado Personalizado para Qiskit Runtime</a><ul>
<li><a class="reference internal" href="#Requisitos-previos">Requisitos previos</a></li>
<li><a class="reference internal" href="#Antecedentes">Antecedentes</a><ul>
<li><a class="reference internal" href="#Valor-esperado-de-un-operador-diagonal">Valor esperado de un operador diagonal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Programa-principal">Programa principal</a></li>
<li><a class="reference internal" href="#Pruebas-locales">Pruebas locales</a></li>
<li><a class="reference internal" href="#Metadatos-del-programa">Metadatos del programa</a></li>
<li><a class="reference internal" href="#Cagar-el-programa">Cagar el programa</a><ul>
<li><a class="reference internal" href="#Eliminar-el-programa-si-es-necesario">Eliminar el programa si es necesario</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Encapsular-el-programa-runtime">Encapsular el programa runtime</a><ul>
<li><a class="reference internal" href="#Intentándolo">Intentándolo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Volumen-Cuántico-como-un-valor-esperado">Volumen Cuántico como un valor esperado</a></li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
         <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
         <script src="../../_static/jquery.js"></script>
         <script src="../../_static/underscore.js"></script>
         <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
         <script src="../../_static/doctools.js"></script>
         <script src="../../_static/thebelab-helper.js"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
         <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
         <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
         <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
         <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
     

  

  <script type="text/javascript" src="../../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <div>
    <br>
  </div>

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://qiskit.org/" aria-label="PyTorch"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="../../getting_started.html">Getting Started</a>
          </li>
          <li>
            <a href="../../tutorials.html">Tutorials</a>
          </li>
          <li>
            <a href="https://qiskit.org/documentation/partners/">Qiskit Providers</a>
          </li>
          <br>
          <li class="resources-mobile-menu-title">
            Applications
          </li>
          <ul class="resources-mobile-menu-items">
            <li>
              <a href="https://qiskit.org/documentation/machine-learning/">Machine learning</a>
            </li>

            <li>
              <a href="https://qiskit.org/documentation/nature/">Nature</a>
            </li>

            <li>
              <a href="https://qiskit.org/documentation/finance/">Finance</a>
            </li>

            <li>
              <a href="https://qiskit.org/documentation/optimization/">Optimization</a>
            </li>
          </ul>

          <br>

          <li class="resources-mobile-menu-title">
            Resources
          </li>

          <ul class="resources-mobile-menu-items">
            <li>
              <a href="https://qiskit.slack.com">Slack support</a>
            </li>
          </ul>
          <br>
        </ul>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>